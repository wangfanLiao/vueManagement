"use strict";(self["webpackChunkvue_3_2"]=self["webpackChunkvue_3_2"]||[]).push([[743],{1901:function(e,a,l){var t=l(9263);const n=async e=>{const a=await(0,t.A)({url:"/otList",method:"POST",data:e});return a};a.A=n},2743:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});var t=l(5703),n=(l(6422),l(7978),l(6091)),o=(l(1188),l(5013)),u=(l(3183),l(2085)),i=(l(9095),l(4075)),d=(l(1620),l(2066)),r=(l(4332),l(7276)),v=(l(9267),l(9303),l(7390),l(1857)),s=l(2298),c=(l(4205),l(4114),l(641)),p=l(953),m=l(33),f=l(8548),k=l(1901),h=l(9263);const b=async e=>{const a=await(0,h.A)({url:"/delete",method:"POST",data:e});return a};var w=b;const y=e=>{const a=(0,h.A)({url:"/edit",method:"POST",data:e});return a};var g=y,_=l(4353),F=l.n(_);const T=[{label:"记录时间",prop:"createTime",width:260},{label:"加班开始时间",prop:"startTime",width:260},{label:"加班结束时间",prop:"endTime",width:260},{label:"加班时长",prop:"overtime",width:100},{label:"操作",prop:"action",width:240}];var x=l(163),V=l(6824);const R=e=>((0,c.Qi)("data-v-d6fd775a"),e=e(),(0,c.jt)(),e),C={class:"card-header"},K={class:"block"},W=R((()=>(0,c.Lk)("span",{class:"demonstration"},"更新加班时间",-1))),A={class:"input"},L={class:"dialog-footer"};var U={__name:"index",setup(e){const a=(0,p.KR)(1),l=(0,p.KR)(10),h=(0,p.KR)(0),b=(0,p.KR)(),y=(0,p.KR)(),_=(0,p.KR)(),R={username:localStorage.getItem("username")},U=(0,p.KR)(!1),S=(0,p.KR)(),z=(0,p.KR)(!0),I=(0,p.KR)(),$=(0,p.KR)(!1),E=(0,p.KR)();let P;const X=[new Date(2e3,1,1,18,0,0),new Date(2e3,1,1,20,0,0)],D=e=>e+1+(a.value-1)*l.value,O=(e,a,l)=>{_.value=1===e?l.slice(0,a):l.slice((e-1)*a,(e-1)*a+a)},Q=(e,a)=>{U.value=!0,P=a.id,z.value=!0,S.value=[F()(a.startTime),F()(a.endTime)],I.value=a.overtime,console.log(F()(a.startTime)),console.log(e,a,a.id)},j=async()=>{$.value=!1,console.log(E.value);const e=await g(E.value[0]);x.nk.info(e.meta.message);const t=await(0,k.A)(R),n=t.data;n.reverse(),y.value=n,h.value=t.data.length,O(a.value,l.value,y.value),console.log(e),U.value=!1},G=()=>{S.value?(I.value=(S.value[1]-S.value[0])/36e5,E.value=[{id:P,username:R.username,startTime:(0,V.A)(S.value[0]),endTime:(0,V.A)(S.value[1]),overtime:I.value}],z.value=!1):(I.value=null,z.value=!0,x.nk.info("请选择时间"))},H=async(e,t)=>{const n=await w({id:t.id});if(console.log(n),200===n.meta.status){const e=await(0,k.A)(R),t=e.data;t.reverse(),y.value=t,h.value=e.data.length,O(a.value,l.value,y.value),x.nk.info(n.meta.message)}else x.nk.info("error")};(0,c.sV)((async()=>{const e=await(0,k.A)(R),t=e.data;t.reverse(),y.value=t,h.value=e.data.length,O(a.value,l.value,y.value)}));const M=()=>{O(a.value,l.value,y.value)},Z=()=>{let e=[];b.value?y.value.forEach((a=>{F()(a.createTime).month()+1-b.value===0&&e.push(a)})):e=y.value,0===e.length?x.nk.error("所查询的月份没有加班记录"):b.value?(x.nk.info(`已显示${b.value}月加班数据`),O(a.value,l.value,e)):(x.nk.info("已显示全部加班数据"),O(a.value,l.value,e))};return(e,k)=>{const w=s.WK,y=v.S2,g=d.o8,F=r.n3,x=d.Up,V=i.MG,R=u.kZ,P=o.pw,O=n.aQ,q=t.Ik;return(0,c.uX)(),(0,c.Wv)(q,{style:{"max-width":"100%"}},{header:(0,c.k6)((()=>[(0,c.Lk)("div",C,[(0,c.Lk)("span",null,[(0,c.bF)(w,{modelValue:b.value,"onUpdate:modelValue":k[0]||(k[0]=e=>b.value=e),style:{width:"240px"},placeholder:"请输入要查询的月份的阿拉伯数字",clearable:""},null,8,["modelValue"])]),(0,c.Lk)("span",null,[(0,c.bF)(y,{type:"primary",icon:(0,p.R1)(f.Search),plain:"",onClick:Z},{default:(0,c.k6)((()=>[(0,c.eW)((0,m.v_)(e.$t("table.search")),1)])),_:1},8,["icon"])])])])),footer:(0,c.k6)((()=>[(0,c.bF)(O,{"current-page":a.value,"onUpdate:currentPage":k[7]||(k[7]=e=>a.value=e),"page-size":l.value,"onUpdate:pageSize":k[8]||(k[8]=e=>l.value=e),total:h.value,background:"",layout:"prev, pager, next",onCurrentChange:M},null,8,["current-page","page-size","total"])])),default:(0,c.k6)((()=>[(0,c.bF)(x,{data:_.value,height:"100%",stripe:"",style:{width:"100%"}},{default:(0,c.k6)((()=>[(0,c.bF)(g,{type:"index",label:"序号",width:"80px",index:D}),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,p.R1)(T),((a,l)=>((0,c.uX)(),(0,c.Wv)(g,{prop:a.prop,label:a.label,key:l,index:l,fixed:"action"===a.prop?"right":void 0,width:a.width},(0,c.eX)({_:2},["createTime"===a.prop?{name:"default",fn:(0,c.k6)((({row:a})=>[(0,c.eW)((0,m.v_)(e.$dateFormat(a.createTime)),1)])),key:"0"}:"startTime"===a.prop?{name:"default",fn:(0,c.k6)((({row:e})=>[(0,c.eW)((0,m.v_)(e.startTime),1)])),key:"1"}:"endTime"===a.prop?{name:"default",fn:(0,c.k6)((({row:e})=>[(0,c.eW)((0,m.v_)(e.endTime),1)])),key:"2"}:"action"===a.prop?{name:"default",fn:(0,c.k6)((e=>[(0,c.bF)(y,{size:"small",onClick:a=>Q(e.$index,e.row)},{default:(0,c.k6)((()=>[(0,c.eW)(" Edit ")])),_:2},1032,["onClick"]),(0,c.bF)(F,{width:"220","confirm-button-text":"确  认","cancel-button-text":"不,  我点着玩的.",icon:(0,p.R1)(f.InfoFilled),"icon-color":"#626AEF",title:"确定要删除这条数据吗?",onConfirm:a=>H(e.$index,e.row)},{reference:(0,c.k6)((()=>[(0,c.bF)(y,{size:"small",type:"danger"},{default:(0,c.k6)((()=>[(0,c.eW)(" Delete ")])),_:1})])),_:2},1032,["icon","onConfirm"])])),key:"3"}:void 0]),1032,["prop","label","index","fixed","width"])))),128))])),_:1},8,["data"]),(0,c.bF)(P,{modelValue:U.value,"onUpdate:modelValue":k[6]||(k[6]=e=>U.value=e),title:"编辑加班记录",direction:"rtl",size:"35%","destroy-on-close":""},{default:(0,c.k6)((()=>[(0,c.Lk)("div",K,[W,(0,c.bF)(V,{modelValue:S.value,"onUpdate:modelValue":k[1]||(k[1]=e=>S.value=e),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":X,onChange:G},null,8,["modelValue"])]),(0,c.Lk)("div",A,[(0,c.bF)(w,{modelValue:I.value,"onUpdate:modelValue":k[2]||(k[2]=e=>I.value=e),style:{width:"240px"},disabled:"",placeholder:"请选择加班时间"},{append:(0,c.k6)((()=>[(0,c.eW)("小时")])),_:1},8,["modelValue"]),(0,c.bF)(y,{type:"primary",onClick:k[3]||(k[3]=e=>$.value=!0),disabled:z.value,plain:""},{default:(0,c.k6)((()=>[(0,c.eW)("确认")])),_:1},8,["disabled"])]),(0,c.bF)(R,{modelValue:$.value,"onUpdate:modelValue":k[5]||(k[5]=e=>$.value=e),title:"确认修改?",width:"800","destroy-on-close":"",draggable:"",overflow:""},{footer:(0,c.k6)((()=>[(0,c.Lk)("div",L,[(0,c.bF)(y,{onClick:k[4]||(k[4]=e=>$.value=!1)},{default:(0,c.k6)((()=>[(0,c.eW)("取消")])),_:1}),(0,c.bF)(y,{type:"primary",onClick:j},{default:(0,c.k6)((()=>[(0,c.eW)(" 确认 ")])),_:1})])])),default:(0,c.k6)((()=>[(0,c.bF)(x,{data:E.value,style:{width:"100%"},border:""},{default:(0,c.k6)((()=>[(0,c.bF)(g,{property:"startTime",label:"开始时间",style:{width:"33%"}}),(0,c.bF)(g,{property:"endTime",label:"结束时间",style:{width:"33%"}}),(0,c.bF)(g,{property:"overtime",label:"加班时长(H)",style:{width:"34%"}})])),_:1},8,["data"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})}}},S=l(6262);const z=(0,S.A)(U,[["__scopeId","data-v-d6fd775a"]]);var I=z},7978:function(e,a,l){l(6422)},8884:function(e,a,l){l(6422)},1620:function(e,a,l){l(6422),l(4205),l(6280),l(9267),l(9303)},9095:function(e,a,l){l(6422),l(6123)},3183:function(e,a,l){l(6422),l(6123)},4205:function(e,a,l){l(6422)},6123:function(e,a,l){l(6422)},1188:function(e,a,l){l(6422),l(4205),l(574),l(6280),l(9267)},7390:function(e,a,l){l(6422),l(8884),l(574)},4332:function(e,a,l){l(6422),l(8884),l(1605),l(6280)},574:function(e,a,l){l(6422)}}]);
//# sourceMappingURL=743.d1ec210f.js.map