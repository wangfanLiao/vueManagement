"use strict";(self["webpackChunkvue_3_2"]=self["webpackChunkvue_3_2"]||[]).push([[981],{1901:function(e,a,t){var l=t(9263);const n=async e=>{const a=await(0,l.A)({url:"/otList",method:"POST",data:e});return a};a.A=n},3423:function(e,a,t){t(4114);var l=t(4353),n=t.n(l),u=t(4629),o=t.n(u);t(6033);n().extend(o()),n().locale("zh-cn");const s=(e,a)=>{let t,l;const u=[];return e.forEach((e=>{t=0,l=0,a.forEach(((a,u)=>{a.username===e.username&&n()().month()===n()(a.startTime).month()&&(t+=a.overtime,l+=1)})),u.push({username:e.username,times:l,nowMonthOt:t})})),u};a.A=s},7981:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var l=t(9753),n=(t(6422),t(3578),t(6159)),u=t(5703),o=(t(7978),t(2085)),s=(t(9095),t(2066)),d=(t(4332),t(7390),t(2691)),i=(t(7681),t(306)),r=(t(7520),t(1857)),v=(t(9303),t(2298)),c=(t(4205),t(4075)),m=(t(1620),t(641)),f=t(33),p=t(953),k=t(6824),b=t(9263);const h=e=>{const a=(0,b.A)({url:"/addOt",method:"POST",data:e});return a};var _=h,F=t(1901),y=t(163),w=t(6433),K=t(3423);const R=e=>((0,m.Qi)("data-v-530267af"),e=e(),(0,m.jt)(),e),L={class:"block"},T=R((()=>(0,m.Lk)("span",{class:"demonstration"},"选择加班时间",-1))),A={class:"input"},V={class:"dialog-footer"},g={class:"timeline"},C={class:"el-statistic"};var x={__name:"index",setup(e){let a;const t=(0,p.KR)(!1),b=(0,p.KR)(),h=(0,p.KR)(0),R=(0,p.KR)(0),x=(0,p.KR)(),W=(0,p.KR)(),O=(0,p.KR)(!0),S=(0,p.KR)(),E=(0,p.KR)(),I=(0,w.pnh)(h,{duration:1500}),U=(0,w.pnh)(R,{duration:1500}),D=[new Date(2e3,1,1,18,0,0),new Date(2e3,1,1,20,0,0)],M={username:localStorage.getItem("username")},X=()=>{x.value?(W.value=(x.value[1]-x.value[0])/36e5,E.value=[{username:M.username,startTime:(0,k.A)(x.value[0]),endTime:(0,k.A)(x.value[1]),overtime:W.value}],O.value=!1):(W.value=null,O.value=!0,y.nk.info("请选择时间"))},z=async()=>{const e=await _(E.value[0]);(0,y.nk)(e.meta.message),H(),t.value=!1,O.value=!0,x.value=null},H=async()=>{const e=await(0,F.A)(M);if(a=(0,K.A)([M],e.data),h.value=a[0].times,R.value=a[0].nowMonthOt,0===e.data.length)b.value="无最近提交记录";else{b.value="最近提交记录";const a=e.data;a.reverse(),S.value=a.slice(0,3)}};return(0,m.sV)((()=>{H()})),(e,a)=>{const h=c.MG,_=v.WK,F=r.S2,y=i.uD,w=d.S2,K=s.o8,R=s.Up,M=o.kZ,H=u.Ik,P=n.Y9,j=n.xT,G=l.ez;return(0,m.uX)(),(0,m.CE)(m.FK,null,[(0,m.bF)(w,null,{default:(0,m.k6)((()=>[(0,m.bF)(y,{span:24},{default:(0,m.k6)((()=>[(0,m.Lk)("div",L,[T,(0,m.bF)(h,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value=e),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":D,onChange:X},null,8,["modelValue"])]),(0,m.Lk)("div",A,[(0,m.bF)(_,{modelValue:W.value,"onUpdate:modelValue":a[1]||(a[1]=e=>W.value=e),style:{width:"240px"},disabled:"",placeholder:"请选择加班时间"},{append:(0,m.k6)((()=>[(0,m.eW)("小时")])),_:1},8,["modelValue"]),(0,m.bF)(F,{type:"success",onClick:a[2]||(a[2]=e=>t.value=!0),disabled:O.value,plain:""},{default:(0,m.k6)((()=>[(0,m.eW)("确认")])),_:1},8,["disabled"])])])),_:1})])),_:1}),(0,m.bF)(M,{modelValue:t.value,"onUpdate:modelValue":a[4]||(a[4]=e=>t.value=e),title:"确认修改?",width:"800","destroy-on-close":"",draggable:"",overflow:""},{footer:(0,m.k6)((()=>[(0,m.Lk)("div",V,[(0,m.bF)(F,{onClick:a[3]||(a[3]=e=>t.value=!1)},{default:(0,m.k6)((()=>[(0,m.eW)("取消")])),_:1}),(0,m.bF)(F,{type:"primary",onClick:z},{default:(0,m.k6)((()=>[(0,m.eW)(" 确认 ")])),_:1})])])),default:(0,m.k6)((()=>[(0,m.bF)(R,{data:E.value,style:{width:"100%"},border:""},{default:(0,m.k6)((()=>[(0,m.bF)(K,{property:"startTime",label:"开始时间",style:{width:"33%"}}),(0,m.bF)(K,{property:"endTime",label:"结束时间",style:{width:"33%"}}),(0,m.bF)(K,{property:"overtime",label:"加班时长(H)",style:{width:"34%"}})])),_:1},8,["data"])])),_:1},8,["modelValue"]),(0,m.bF)(w,null,{default:(0,m.k6)((()=>[(0,m.bF)(y,{span:12},{default:(0,m.k6)((()=>[(0,m.Lk)("div",g,[(0,m.Lk)("h2",null,(0,f.v_)(b.value),1),(0,m.bF)(j,{style:{"max-width":"460px"}},{default:(0,m.k6)((()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)(S.value,((e,a)=>((0,m.uX)(),(0,m.Wv)(P,{key:a,timestamp:(0,p.R1)(k.A)(e.createTime),placement:"top"},{default:(0,m.k6)((()=>[(0,m.bF)(H,null,{default:(0,m.k6)((()=>[(0,m.Lk)("h4",null,"加班时长"+(0,f.v_)(e.overtime)+"H",1),(0,m.Lk)("p",null,"开始时间"+(0,f.v_)(e.startTime),1),(0,m.Lk)("p",null,"结束时间"+(0,f.v_)(e.endTime),1)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})])])),_:1}),(0,m.bF)(y,{span:12},{default:(0,m.k6)((()=>[(0,m.Lk)("div",C,[(0,m.bF)(G,{title:"本月加班次数",value:(0,p.R1)(I)},null,8,["value"]),(0,m.bF)(G,{title:"本月加班时长",value:(0,p.R1)(U)},null,8,["value"])])])),_:1})])),_:1})],64)}}},W=t(6262);const O=(0,W.A)(x,[["__scopeId","data-v-530267af"]]);var S=O},7978:function(e,a,t){t(6422)},8884:function(e,a,t){t(6422)},7520:function(e,a,t){t(6422)},1620:function(e,a,t){t(6422),t(4205),t(6280),t(9267),t(9303)},9095:function(e,a,t){t(6422),t(6123)},4205:function(e,a,t){t(6422)},6123:function(e,a,t){t(6422)},7681:function(e,a,t){t(6422)},3578:function(e,a,t){t(6422)},7390:function(e,a,t){t(6422),t(8884),t(574)},4332:function(e,a,t){t(6422),t(8884),t(1605),t(6280)},574:function(e,a,t){t(6422)}}]);
//# sourceMappingURL=981.b166ba69.js.map